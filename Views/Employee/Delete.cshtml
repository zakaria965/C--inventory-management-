@model InventoryManagementSystem.Models.Employee
@{
    ViewData["Title"] = "Delete Employee";
    Layout = "_DashboardLayout";
}

<div class="container">
    <h1>Delete Employee</h1>

    @if (ViewBag.HasRelatedRecords == true)
    {
        <div class="alert alert-danger" role="alert" style="border-left: 4px solid #dc3545;">
            <strong><i class="fas fa-exclamation-triangle"></i> Cannot Delete!</strong> This employee has related records and cannot be deleted:
            <ul style="margin: 10px 0 0 20px;">
                @if (ViewBag.RelatedRecords.Salaries > 0)
                {
                    <li><strong>@ViewBag.RelatedRecords.Salaries</strong> salary record(s)</li>
                }
            </ul>
            <p style="margin: 10px 0 0 0;">Please remove or update these related records before deleting this employee.</p>
        </div>
    }
    else
    {
        <div class="alert alert-warning" role="alert">
            <strong>Warning!</strong> Are you sure you want to delete this employee? This action cannot be undone.
        </div>
    }

    <div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); max-width: 600px;">
        <h3 style="margin-top: 0; color: #2d5a5a;">@Model.FullName</h3>
        
        <div style="margin: 20px 0;">
            <p><strong>Email:</strong> @Model.Email</p>
            <p><strong>Position:</strong> @(Model.Position ?? "N/A")</p>
            <p><strong>Department:</strong> @(Model.Department ?? "N/A")</p>
            <p><strong>Status:</strong> @(Model.IsActive ? "Active" : "Inactive")</p>
        </div>

        <form asp-action="Delete" method="post" style="margin-top: 30px;">
            <input type="hidden" asp-for="Id" />
            <div style="display: flex; gap: 10px;">
                @if (ViewBag.HasRelatedRecords == true)
                {
                    <button type="submit" disabled style="background-color: #6c757d; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: not-allowed; opacity: 0.6;">Delete (Disabled)</button>
                }
                else
                {
                    <button type="submit" style="background-color: #dc3545; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">Delete</button>
                }
                <a href="/Employee" style="background-color: #6c757d; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; display: inline-block;">Cancel</a>
            </div>
        </form>
    </div>
</div>

<style>
    .alert {
        padding: 12px 20px;
        margin-bottom: 20px;
        border: 1px solid transparent;
        border-radius: 4px;
    }
    .alert-warning {
        color: #856404;
        background-color: #fff3cd;
        border-color: #ffeaa7;
    }
    .alert-danger {
        color: #d4878fff;
        background-color: #f8d7da;
        border-color: #f5c6cb;
    }
</style>

